(function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;!function(b,c,d){return d.FlaskRestless={defaultlimit:20},d.FlaskRestless.Model=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return a(d,b),d.prototype.initialize=function(a){c.each(a,function(a,b){Object.defineProperty(this,b,{get:function(){return this.get(b)},set:function(a){this.set(b,a)},enumerable:!0,configurable:!0})},this)},d.prototype.format=function(a){return a},d.prototype.parse=function(a){return this.format(a)},d}(d.Model),d.FlaskRestless.Collection=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return a(d,b),d.prototype.current_page=-1,d.prototype.number_of_pages=-1,d.prototype.format=function(a){return a},d.prototype.parse=function(a){return a.objects?(this.current_page=a.page,this.number_of_pages=a.total_pages,this.format(a.objects)):this.format(a)},d.prototype.has_next=function(){return this.current_page<this.number_of_pages},d.prototype.splice=function(a,b){var d,e;return d=c.toArray(arguments).slice(2).concat({at:a}),e=this.models.slice(a,a+b),this.remove(e).add.apply(this,d),e},d}(d.Collection),d.FlaskRestless.Filter=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.defaults={name:"",op:"",val:""},c}(d.Model),d.FlaskRestless.SearchOptions=function(){function a(){this.query={},this.options={}}return a.prototype.setOptions=function(a){this.options=a},a.prototype.setFilters=function(a){return this.query.filters=a},a.prototype.setOrderby=function(a){return this.query.order_by=[a]},a.prototype.getOptions=function(){var a;return this.query&&(a={q:JSON.stringify(this.query),results_per_page:this.options.results_per_page,page:this.options.page}),this.options.data=a,this.options},a}(),d.FlaskRestless.CollectionIterator=function(){function a(a){this.collection=a,-1!==this.collection.current_page?this.current_page=this.collection.current_page:this.current_page=1,this.options=new d.FlaskRestless.SearchOptions,this.options.options.reset=!0}return a.prototype.itemsPerPage=function(a){return a?this.options.options.results_per_page=a:void 0},a.prototype.setOptions=function(a){return a&&0!==Object.keys(a).length&&c.extend(this.options.options,a),this},a.prototype.at=function(a){if(-1!==this.collection.number_of_pages){if(a>=1&&a<=this.collection.number_of_pages)return this.current_page=a,this.do_search()}else if(a>=1)return this.current_page=a,this.do_search()},a.prototype.next=function(){var a;return-1!==this.collection.current_page&&(this.current_page=this.collection.current_page,a=this.current_page+1),-1===this.collection.number_of_pages?this.do_search():a<=this.collection.number_of_pages?(this.current_page=a+"",this.do_search()):void 0},a.prototype.prev=function(){var a;return-1!==this.collection.current_page&&(this.current_page=this.collection.current_page,a=this.current_page-1),-1===this.collection.number_of_pages?this.do_search():a>=1?(this.current_page=a+"",this.do_search()):void 0},a.prototype.do_search=function(){return this.options.options.page=this.current_page,this.collection.fetch(this.options.getOptions())},a}()}(window.$,window._,window.Backbone)}).call(this);